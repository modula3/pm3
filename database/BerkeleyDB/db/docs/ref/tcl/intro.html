<!--$Id$-->
<!--Copyright 1997-2002 by Sleepycat Software, Inc.-->
<!--All rights reserved.-->
<!--See the file LICENSE for redistribution information.-->
<html>
<head>
<title>Berkeley DB Reference Guide: Loading Berkeley DB with Tcl</title>
<meta name="description" content="Berkeley DB: An embedded database programmatic toolkit.">
<meta name="keywords" content="embedded,database,programmatic,toolkit,b+tree,btree,hash,hashing,transaction,transactions,locking,logging,access method,access methods,java,C,C++">
</head>
<body bgcolor=white>
<a name="2"><!--meow--></a>
<table width="100%"><tr valign=top>
<td><h3><dl><dt>Berkeley DB Reference Guide:<dd>Tcl API</dl></h3></td>
<td align=right><a href="../../ref/perl/intro.html"><img src="../../images/prev.gif" alt="Prev"></a><a href="../../reftoc.html"><img src="../../images/ref.gif" alt="Ref"></a><a href="../../ref/tcl/using.html"><img src="../../images/next.gif" alt="Next"></a>
</td></tr></table>
<p>
<h1 align=center>Loading Berkeley DB with Tcl</h1>
<p>Berkeley DB includes a dynamically loadable Tcl API, which requires that
Tcl/Tk 8.1 or later already be installed on your system.  We recommend
that you install later releases of Tcl/Tk than 8.1 if possible,
especially on Windows platforms, because we found that we had to make
local fixes to the 8.1 release in a few cases.  You can download a copy
of Tcl from the <a href="http://dev.scriptics.com/">Tcl Developer
Xchange</a> Web site.
<p>This document assumes that you already configured Berkeley DB for Tcl
support, and you have built and installed everything where you want it
to be.  If you have not done so, see
<a href="../../ref/build_unix/conf.html">Configuring Berkeley DB</a> or
<a href="../../ref/build_win/intro.html">Building for Win32</a> for more
information.
<h3>Installing as a Tcl Package</h3>
<p>Once enabled, the Berkeley DB shared library for Tcl is automatically installed
as part of the standard installation process.  However, if you want to be
able to dynamically load it as a Tcl package into your script, there are
several steps that must be performed:
<p><ol>
<p><li>Run the Tcl shell in the install directory.
<li>Append this directory to your auto_path variable.
<li>Run the pkg_mkIndex proc, giving the name of the Berkeley DB Tcl library.
</ol>
<p>For example:
<p><blockquote><pre># tclsh8.3
% lappend auto_path /usr/local/BerkeleyDB.4.1/lib
% pkg_mkIndex /usr/local/BerkeleyDB.4.1/lib libdb_tcl-4.1.so</pre></blockquote>
<p>Note that your Tcl and Berkeley DB version numbers may differ from the
example, and so your tclsh and library names may be different.
<h3>Loading Berkeley DB with Tcl</h3>
<p>The Berkeley DB package may be loaded into the user's interactive Tcl script
(or wish session) via the <b>load</b> command. For example:
<p><blockquote><pre>load /usr/local/BerkeleyDB.4.1/lib/libdb_tcl-4.1.so</pre></blockquote>
<p>Note that your Berkeley DB version numbers may differ from the example, and so
the library name may be different.
<p>If you installed your library to run as a Tcl package, Tcl application
scripts should use the <b>package</b> command to indicate to the Tcl
interpreter that it needs the Berkeley DB package and where to find it. For
example:
<p><blockquote><pre>lappend auto_path "/usr/local/BerkeleyDB.4.1/lib"
package require Db_tcl</pre></blockquote>
<p>No matter which way the library gets loaded, it creates a command named
<b>berkdb</b>.  All the Berkeley DB functionality is accessed via this
command and additional commands it creates on behalf of the application.
A simple test to determine whether everything is loaded and ready is to
display the library version, as follows:
<p><blockquote><pre>berkdb version -string</pre></blockquote>
<p>This should return you the Berkeley DB version in a string format.
<table width="100%"><tr><td><br></td><td align=right><a href="../../ref/perl/intro.html"><img src="../../images/prev.gif" alt="Prev"></a><a href="../../reftoc.html"><img src="../../images/ref.gif" alt="Ref"></a><a href="../../ref/tcl/using.html"><img src="../../images/next.gif" alt="Next"></a>
</td></tr></table>
<p><font size=1><a href="http://www.sleepycat.com">Copyright Sleepycat Software</a></font>
</body>
</html>
