(* Copyright (C) 1994, Digital Equipment Corporation. *)
(* All rights reserved.                               *)
(* See the file COPYRIGHT for a full description.     *)
 
(****************
Return-Path: najork@cs.uiuc.edu
Received: by jumbo.pa.dec.com; id AA29315; Thu, 5 Nov 92 12:11:20 -0800
Received: by inet-gw-2.pa.dec.com; id AA15854; Thu, 5 Nov 92 12:11:19 -0800
Received: from cypress.cs.uiuc.edu by spruce.cs.uiuc.edu with SMTP id AA26063  (5.64+/IDA-1.3.4 for kalsow@pa.dec.com); Thu, 5 Nov 92 14:11:13 -0600
Date: Thu, 5 Nov 92 14:11:13 -0600
From: Marc Najork <najork@cs.uiuc.edu>
Message-Id: <9211052011.AA26063@spruce.cs.uiuc.edu>
Received: by cypress.cs.uiuc.edu (4.1/SMI-4.1)id AA14621; Thu, 5 Nov 92 14:10:40 CST
To: kalsow
Subject: Bug Report for m3 2.09
Cc: najork@cs.uiuc.edu

I believe the following program should be legal:
***************)

        MODULE Main;
        
        TYPE 
          T1 = RECORD
            a : ARRAY [1 .. 2] OF REF T1;
          END;

(*************        
        BEGIN END Main.


but when compiling it with m3 Version 2.09 (on a Sparc), I get the error:

        "M3Bug_m.c", line 11: syntax error at or near word "typedef"
        "M3Bug_m.c", line 13: zero sized structure
        "M3Bug.m3", line 43: a undefined


The same error is generated by the program:


        MODULE Main;
*************)
        
        TYPE 
          T2 = RECORD
            a : ARRAY [1 .. 3] OF TT2;
          END;
          TT2 = REF T2;
        
(*******************
        BEGIN END Main.


Finally, this version of the program works:


        MODULE Main;
*******************)
        
        TYPE 
          TT3 = REF T3;
          T3 = RECORD
            a : ARRAY [1 .. 4] OF TT3;
          END;
        
        BEGIN END Main.
(*******************

-- Marc

***************)
